{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">Roster for {{ weekday }} ({{ date_compact }})</h2>

<!-- WhatsApp Share Button -->
<div class="mb-3">
  <a class="btn btn-success"
     href="https://wa.me/?text={{ roster_text|urlencode }}"
     target="_blank" rel="noopener">
    Share Roster to WhatsApp
  </a>
</div>

<div class="row g-3">
  {% for squad_name, block in squad_blocks.items() %}
  <div class="col-12 col-lg-6">
    <div class="card bg-secondary text-white">
      <div class="card-body">
        <h4 class="mb-1">{{ squad_name }} PerStats</h4>
        <div class="text-muted">{{ date_compact }} / {{ weekday }}</div>

        <!-- Summary counts -->
        <div class="mt-3">
          <div><strong>Assigned:</strong> {{ block['Assigned'] }}</div>
          {% for sec in STATUS_SECTIONS %}
            {% set items = block[sec] %}
            {% if items and items|length > 0 %}
              <div><strong>{{ sec }}:</strong> {{ items|length }}</div>
            {% endif %}
          {% endfor %}
        </div>

        <hr class="border-light">

        <!-- Section lists -->
        {% for sec in STATUS_SECTIONS %}
          {% set items = block[sec] %}
          {% if items and items|length > 0 %}
            <div class="mb-3">
              <h5 class="mb-2">{{ sec }}</h5>
              {% for name in items %}
                <div>{{ name }}</div>
              {% endfor %}
            </div>
          {% endif %}
        {% endfor %}

      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
