{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">Roster for {{ weekday }} ({{ date_compact }})</h2>

<!-- WhatsApp Share Button -->
<div class="mb-3">
  <a class="btn btn-success"
     href="https://wa.me/?text={{ roster_text|urlencode }}"
     target="_blank" rel="noopener">
    Share Roster to WhatsApp
  </a>
</div>

<div class="row g-3">
  {% for squad_name, block in squad_blocks.items() %}
  <div class="col-12 col-lg-6">
    <div class="card bg-secondary text-white">
      <div class="card-body">
        <h4 class="mb-1">{{ squad_name }} PerStats</h4>
        <div class="text-muted">{{ date_compact }} / {{ weekday }}</div>

        <div class="mt-3">
          <div><strong>Assigned:</strong> {{ block['Assigned'] }}</div>

          {% set present = block['Present'] %}
          {% set leave = block['Leave'] %}
          {% set gym = block['GYM Detail'] %}
          {% set ns = block['Not Submitted'] %}

          {% if present|length > 0 %}
            <div><strong>Present:</strong> {{ present|length }}</div>
          {% endif %}
          {% if leave|length > 0 %}
            <div><strong>Leave:</strong> {{ leave|length }}</div>
          {% endif %}
          {% if gym|length > 0 %}
            <div><strong>GYM Detail:</strong> {{ gym|length }}</div>
          {% endif %}
          {% if ns|length > 0 %}
            <div><strong>Not Submitted:</strong> {{ ns|length }}</div>
          {% endif %}
        </div>

        <hr class="border-light">

        {% if present|length > 0 %}
        <div class="mb-3">
          <h5 class="mb-2">Present</h5>
          {% for name in present %}
            <div>{{ name }}</div>
          {% endfor %}
        </div>
        {% endif %}

        {% if leave|length > 0 %}
        <div class="mb-3">
          <h5 class="mb-2">Leave</h5>
          {% for name in leave %}
            <div>{{ name }}</div>
          {% endfor %}
        </div>
        {% endif %}

        {% if gym|length > 0 %}
        <div class="mb-3">
          <h5 class="mb-2">GYM Detail</h5>
          {% for name in gym %}
            <div>{{ name }}</div>
          {% endfor %}
        </div>
        {% endif %}

        {% if ns|length > 0 %}
        <div class="mb-1">
          <h5 class="mb-2">Not Submitted</h5>
          {% for name in ns %}
            <div>{{ name }}</div>
          {% endfor %}
        </div>
        {% endif %}

      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}

